<?php
/**
 * Generated by Haxe 4.0.2
 */

namespace tink\core\_Callback;

use \haxe\Timer;
use \php\Boot;

final class Callback_Impl_ {
	/**
	 * @var int
	 */
	static public $depth = 0;

	/**
	 * @param \Closure $f
	 * 
	 * @return void
	 */
	public static function defer ($f) {
		#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:49: characters 7-29
		Timer::delay($f, 0);
	}

	/**
	 * @param \Closure $f
	 * 
	 * @return \Closure
	 */
	public static function fromNiladic ($f) {
		#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:27: characters 5-48
		return function ($_)  use (&$f) {
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:27: characters 45-48
			$f();
		};
	}

	/**
	 * @param \Closure $this
	 * @param mixed $data
	 * 
	 * @return void
	 */
	public static function invoke ($this1, $data) {
		#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:14: lines 14-19
		if (Callback_Impl_::$depth < 500) {
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:15: characters 7-14
			Callback_Impl_::$depth++;
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:16: characters 7-19
			$this1($data);
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:17: characters 7-14
			Callback_Impl_::$depth--;
		} else {
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 25-31
			$_e = $this1;
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 25-36
			$f = function ($data1)  use (&$_e) {
				#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 25-31
				Callback_Impl_::invoke($_e, $data1);
			};
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 25-36
			$data2 = $data;
			#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 10-43
			Callback_Impl_::defer(function ()  use (&$f, &$data2) {
				#/home/jahred/haxelib/tink_core/1,23,0/src/tink/core/Callback.hx:19: characters 25-36
				$f($data2);
			});
		}
	}
}

Boot::registerClass(Callback_Impl_::class, 'tink.core._Callback.Callback_Impl_');
