<?php
/**
 * Generated by Haxe 4.0.2
 */

namespace tink\io;

use \php\Boot;
use \tink\io\_Source\Source_Impl_;
use \tink\streams\StreamObject;
use \tink\io\_StreamParser\StreamParser_Impl_;
use \tink\core\Outcome;
use \tink\core\MPair;
use \tink\core\_Future\FutureObject;

class RealSourceTools {
	/**
	 * @param StreamObject $s
	 * 
	 * @return FutureObject
	 */
	public static function all ($s) {
		#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:163: lines 163-166
		$ret = Source_Impl_::concatAll($s)->map(function ($o) {
			$__hx__switch = ($o->index);
			if ($__hx__switch === 1) {
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:165: characters 19-20
				$e = $o->params[0];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:165: characters 23-33
				return Outcome::Failure($e);
			} else if ($__hx__switch === 2) {
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:164: characters 20-21
				$c = $o->params[0];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:164: characters 24-34
				return Outcome::Success($c);
			}
		});
		#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:163: lines 163-166
		return $ret->gather();
	}

	/**
	 * @param StreamObject $s
	 * @param StreamParserObject $p
	 * 
	 * @return FutureObject
	 */
	public static function parse ($s, $p) {
		#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:169: lines 169-172
		$ret = StreamParser_Impl_::parse($s, $p)->map(function ($r) {
			$__hx__switch = ($r->index);
			if ($__hx__switch === 0) {
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:170: characters 25-29
				$rest = $r->params[1];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:170: characters 19-23
				$data = $r->params[0];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:170: characters 40-60
				$this1 = new MPair($data, $rest);
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:170: characters 32-61
				return Outcome::Success($this1);
			} else if ($__hx__switch === 1) {
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:171: characters 23-24
				$_g1 = $r->params[1];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:171: characters 20-21
				$e = $r->params[0];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:171: characters 38-48
				return Outcome::Failure($e);
			} else if ($__hx__switch === 2) {
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:171: characters 34-35
				$e1 = $r->params[0];
				#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:171: characters 38-48
				return Outcome::Failure($e1);
			}
		});
		#/home/jahred/haxelib/tink_io/0,7,1/src/tink/io/Source.hx:169: lines 169-172
		return $ret->gather();
	}
}

Boot::registerClass(RealSourceTools::class, 'tink.io.RealSourceTools');
