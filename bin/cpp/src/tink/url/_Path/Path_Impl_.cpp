// Generated by Haxe 4.0.2
#include <hxcpp.h>

#ifndef INCLUDED_StringTools
#include <StringTools.h>
#endif
#ifndef INCLUDED_tink_url__Path_Path_Impl_
#include <tink/url/_Path/Path_Impl_.h>
#endif

HX_LOCAL_STACK_FRAME(_hx_pos_5c9c8e84a46e6f2e_24_join,"tink.url._Path.Path_Impl_","join",0x872fbb4e,"tink.url._Path.Path_Impl_.join","tink/url/Path.hx",24,0x18b6105c)
HX_LOCAL_STACK_FRAME(_hx_pos_5c9c8e84a46e6f2e_34_ofString,"tink.url._Path.Path_Impl_","ofString",0xbe5d72ac,"tink.url._Path.Path_Impl_.ofString","tink/url/Path.hx",34,0x18b6105c)
HX_LOCAL_STACK_FRAME(_hx_pos_5c9c8e84a46e6f2e_37_normalize,"tink.url._Path.Path_Impl_","normalize",0x77fd65a9,"tink.url._Path.Path_Impl_.normalize","tink/url/Path.hx",37,0x18b6105c)
namespace tink{
namespace url{
namespace _Path{

void Path_Impl__obj::__construct() { }

Dynamic Path_Impl__obj::__CreateEmpty() { return new Path_Impl__obj; }

void *Path_Impl__obj::_hx_vtable = 0;

Dynamic Path_Impl__obj::__Create(hx::DynamicArray inArgs)
{
	hx::ObjectPtr< Path_Impl__obj > _hx_result = new Path_Impl__obj();
	_hx_result->__construct();
	return _hx_result;
}

bool Path_Impl__obj::_hx_isInstanceOf(int inClassId) {
	return inClassId==(int)0x00000001 || inClassId==(int)0x453f6434;
}

::String Path_Impl__obj::join(::String this1,::String that){
            	HX_STACKFRAME(&_hx_pos_5c9c8e84a46e6f2e_24_join)
HXDLIN(  24)		if ((that == HX_("",00,00,00,00))) {
HXDLIN(  24)			return this1;
            		}
            		else {
HXLINE(  25)			if ((that.charAt(0) == HX_("/",2f,00,00,00))) {
HXLINE(  25)				return that;
            			}
            			else {
HXLINE(  27)				if ((this1.charAt((this1.length - 1)) == HX_("/",2f,00,00,00))) {
HXLINE(  27)					return ::tink::url::_Path::Path_Impl__obj::ofString((this1 + that));
            				}
            				else {
HXLINE(  28)					int _g = this1.lastIndexOf(HX_("/",2f,00,00,00),null());
HXDLIN(  28)					if ((_g == -1)) {
HXLINE(  29)						return that;
            					}
            					else {
HXLINE(  30)						int v = _g;
HXDLIN(  30)						return ::tink::url::_Path::Path_Impl__obj::ofString((this1.substr(0,(v + 1)) + that));
            					}
            				}
            			}
            		}
HXLINE(  24)		return null();
            	}


STATIC_HX_DEFINE_DYNAMIC_FUNC2(Path_Impl__obj,join,return )

::String Path_Impl__obj::ofString(::String s){
            	HX_STACKFRAME(&_hx_pos_5c9c8e84a46e6f2e_34_ofString)
HXDLIN(  34)		::String this1 = ::tink::url::_Path::Path_Impl__obj::normalize(s);
HXDLIN(  34)		return this1;
            	}


STATIC_HX_DEFINE_DYNAMIC_FUNC1(Path_Impl__obj,ofString,return )

::String Path_Impl__obj::normalize(::String s){
            	HX_STACKFRAME(&_hx_pos_5c9c8e84a46e6f2e_37_normalize)
HXLINE(  38)		s = ::StringTools_obj::trim(::StringTools_obj::replace(s,HX_("\\",5c,00,00,00),HX_("/",2f,00,00,00)));
HXLINE(  39)		if ((s == HX_(".",2e,00,00,00))) {
HXLINE(  40)			return HX_("./",41,28,00,00);
            		}
HXLINE(  42)		bool isDir;
HXDLIN(  42)		bool isDir1;
HXDLIN(  42)		if (!(::StringTools_obj::endsWith(s,HX_("/..",2f,d2,23,00)))) {
HXLINE(  42)			isDir1 = ::StringTools_obj::endsWith(s,HX_("/",2f,00,00,00));
            		}
            		else {
HXLINE(  42)			isDir1 = true;
            		}
HXDLIN(  42)		if (!(isDir1)) {
HXLINE(  42)			isDir = ::StringTools_obj::endsWith(s,HX_("/.",1f,29,00,00));
            		}
            		else {
HXLINE(  42)			isDir = true;
            		}
HXLINE(  44)		::Array< ::String > parts = ::Array_obj< ::String >::__new(0);
HXDLIN(  44)		bool isAbsolute = ::StringTools_obj::startsWith(s,HX_("/",2f,00,00,00));
HXDLIN(  44)		int up = 0;
HXLINE(  48)		{
HXLINE(  48)			int _g = 0;
HXDLIN(  48)			::Array< ::String > _g1 = s.split(HX_("/",2f,00,00,00));
HXDLIN(  48)			while((_g < _g1->length)){
HXLINE(  48)				::String part = _g1->__get(_g);
HXDLIN(  48)				_g = (_g + 1);
HXLINE(  49)				{
HXLINE(  49)					::String _g2 = ::StringTools_obj::trim(part);
HXDLIN(  49)					::String _hx_switch_0 = _g2;
            					if (  (_hx_switch_0==HX_("",00,00,00,00)) ){
HXLINE(  50)						goto _hx_goto_3;
            					}
            					if (  (_hx_switch_0==HX_(".",2e,00,00,00)) ){
HXLINE(  51)						goto _hx_goto_3;
            					}
            					if (  (_hx_switch_0==HX_("..",40,28,00,00)) ){
HXLINE(  53)						if (hx::IsNull( parts->pop() )) {
HXLINE(  53)							up = (up + 1);
            						}
HXDLIN(  53)						goto _hx_goto_3;
            					}
            					/* default */{
HXLINE(  54)						::String v = _g2;
HXDLIN(  54)						parts->push(v);
            					}
            					_hx_goto_3:;
            				}
            			}
            		}
HXLINE(  57)		if (isAbsolute) {
HXLINE(  58)			parts->unshift(HX_("",00,00,00,00));
            		}
            		else {
HXLINE(  60)			int _g21 = 0;
HXDLIN(  60)			int _g3 = up;
HXDLIN(  60)			while((_g21 < _g3)){
HXLINE(  60)				_g21 = (_g21 + 1);
HXDLIN(  60)				int i = (_g21 - 1);
HXLINE(  61)				parts->unshift(HX_("..",40,28,00,00));
            			}
            		}
HXLINE(  63)		if (isDir) {
HXLINE(  64)			parts->push(HX_("",00,00,00,00));
            		}
HXLINE(  67)		return parts->join(HX_("/",2f,00,00,00));
            	}


STATIC_HX_DEFINE_DYNAMIC_FUNC1(Path_Impl__obj,normalize,return )


Path_Impl__obj::Path_Impl__obj()
{
}

bool Path_Impl__obj::__GetStatic(const ::String &inName, Dynamic &outValue, hx::PropertyAccess inCallProp)
{
	switch(inName.length) {
	case 4:
		if (HX_FIELD_EQ(inName,"join") ) { outValue = join_dyn(); return true; }
		break;
	case 8:
		if (HX_FIELD_EQ(inName,"ofString") ) { outValue = ofString_dyn(); return true; }
		break;
	case 9:
		if (HX_FIELD_EQ(inName,"normalize") ) { outValue = normalize_dyn(); return true; }
	}
	return false;
}

#ifdef HXCPP_SCRIPTABLE
static hx::StorageInfo *Path_Impl__obj_sMemberStorageInfo = 0;
static hx::StaticInfo *Path_Impl__obj_sStaticStorageInfo = 0;
#endif

hx::Class Path_Impl__obj::__mClass;

static ::String Path_Impl__obj_sStaticFields[] = {
	HX_("join",ea,33,65,46),
	HX_("ofString",48,69,31,a4),
	HX_("normalize",8d,37,a1,ab),
	::String(null())
};

void Path_Impl__obj::__register()
{
	Path_Impl__obj _hx_dummy;
	Path_Impl__obj::_hx_vtable = *(void **)&_hx_dummy;
	hx::Static(__mClass) = new hx::Class_obj();
	__mClass->mName = HX_("tink.url._Path.Path_Impl_",8a,13,5f,78);
	__mClass->mSuper = &super::__SGetClass();
	__mClass->mConstructEmpty = &__CreateEmpty;
	__mClass->mConstructArgs = &__Create;
	__mClass->mGetStaticField = &Path_Impl__obj::__GetStatic;
	__mClass->mSetStaticField = &hx::Class_obj::SetNoStaticField;
	__mClass->mStatics = hx::Class_obj::dupFunctions(Path_Impl__obj_sStaticFields);
	__mClass->mMembers = hx::Class_obj::dupFunctions(0 /* sMemberFields */);
	__mClass->mCanCast = hx::TCanCast< Path_Impl__obj >;
#ifdef HXCPP_SCRIPTABLE
	__mClass->mMemberStorageInfo = Path_Impl__obj_sMemberStorageInfo;
#endif
#ifdef HXCPP_SCRIPTABLE
	__mClass->mStaticStorageInfo = Path_Impl__obj_sStaticStorageInfo;
#endif
	hx::_hx_RegisterClass(__mClass->mName, __mClass);
}

} // end namespace tink
} // end namespace url
} // end namespace _Path
